<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samurai Store - Armory</title>
    <link rel="stylesheet" href="style.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù…Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .store-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px; }
        .game-item { border: 4px solid #fff; padding: 25px; text-align: center; background: #111; transition: 0.3s; }
        .game-item:hover { border-color: #e63946; transform: translateY(-10px); }
        
        /* Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª */
        .cart-panel { background: rgba(0, 0, 0, 0.9); border: 6px solid #e63946; padding: 20px; margin-top: 50px; color: #fff; }
        #cart-items { list-style: none; padding: 0; }
        #cart-items li { border-bottom: 1px dashed #444; padding: 10px 0; display: flex; justify-content: space-between; align-items: center; font-size: 10px; }
        .price-tag { background: #e63946; color: #fff; padding: 5px; font-size: 10px; display: inline-block; margin: 10px 0; }
        
        /* Ø¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ (Light Mode) Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        body.light-mode .pixel-main-card { background-color: #f4ece1; border-color: #8b4513; color: #432b18; }
        body.light-mode .game-item { background: #fdf8f0; border-color: #8b4513; color: #432b18; }
        body.light-mode .cart-panel { background: #fdf8f0; border-color: #8b4513; color: #432b18; }
        body.light-mode .price-tag { background: #800000; }
        body.light-mode .navbar { background: #e9decb; border-bottom: 4px solid #8b4513; }
        
        #petals-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
        body.rtl { direction: rtl; }
        /* ÙƒÙ„Ø§Ø³ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (ØªÙƒÙˆÙ† Ø§Ù„ØµÙØ­Ø© Ù…Ø®ÙÙŠØ©) */
.fade-out {
    opacity: 0;
    transition: opacity 0.5s ease;
}

/* ÙƒÙ„Ø§Ø³ Ø§Ù„Ø¯Ø®ÙˆÙ„ (ØªØ¸Ù‡Ø± Ø§Ù„ØµÙØ­Ø© ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹) */
body {
    opacity: 1;
    transition: opacity 0.5s ease;
}

body.loading {
    opacity: 0;
}
#snackbar-container {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10001;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.snackbar {
    background: #1a1a1a;
    color: #fff;
    border: 2px solid #e63946;
    padding: 12px 20px;
    font-size: 10px; /* Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø®Ø· Ø§Ù„Ø¨ÙƒØ³Ù„ */
    font-family: 'Press Start 2P', cursive;
    box-shadow: 5px 5px 0px #000;
    display: flex;
    align-items: center;
    gap: 10px;
    animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    min-width: 250px;
}

/* Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ (Ù…Ø«Ù„Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡) */
.snackbar.success { border-color: #28a745; }
/* Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ (Ù…Ø«Ù„Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©) */
.snackbar.info { border-color: #f1c40f; }

@keyframes slideUp {
    from { opacity: 0; transform: translateY(100px); }
    to { opacity: 1; transform: translateY(0); }
}

.snackbar.fade-out {
    opacity: 0;
    transform: translateY(-20px);
    transition: all 0.4s ease;
}

body.rtl .snackbar { direction: rtl; }
    </style>
</head>
<body>
    <div class="samurai-doors">
        <div class="door-left"></div>
        <div class="door-right"></div>
    </div>
    <div id="petals-container"></div>
    <audio id="storeMusic" loop><source src="assets/zen-music.mp3" type="audio/mpeg"></audio>
    <audio id="slash-sound"><source src="assets/slash.mp3" type="audio/mpeg"></audio>

    <nav class="navbar">
        <div class="logo">SAMURAI<span>STORE</span></div>
        <div class="nav-controls">
            <button id="music-btn-store" class="control-btn">MUSIC: <span id="music-status-store">OFF</span></button>
            <a href="index.html" class="control-btn" data-en="BACK" data-ar="Ø±Ø¬ÙˆØ¹" style="text-decoration:none;">BACK</a>
        </div>
    </nav>

    <main class="main-card-section">
        <div class="pixel-main-card">
            <h1 data-en="GAME ARMORY" data-ar="Ù…Ø®Ø²Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨">GAME ARMORY</h1>
            
            <div class="store-grid">
                <div class="game-item">
                    <div style="font-size: 40px;">ğŸ®</div>
                    <h3 data-en="SHOGUN REVENGE" data-ar="Ø§Ù†ØªÙ‚Ø§Ù… Ø§Ù„Ø´ÙˆØºÙ†">SHOGUN REVENGE</h3>
                    <div class="price-tag">$19.99</div>
                    <button class="mini-pixel-btn" onclick="addToCart('Shogun Revenge', 19.99)" data-en="ADD TO CART" data-ar="Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©">ADD TO CART</button>
                </div>
                <div class="game-item">
                    <div style="font-size: 40px;">ğŸ‰</div>
                    <h3 data-en="DRAGON SOUL" data-ar="Ø±ÙˆØ­ Ø§Ù„ØªÙ†ÙŠÙ†">DRAGON SOUL</h3>
                    <div class="price-tag">$25.00</div>
                    <button class="mini-pixel-btn" onclick="addToCart('Dragon Soul', 25.00)" data-en="ADD TO CART" data-ar="Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©">ADD TO CART</button>
                </div>
            </div>

            <div class="cart-panel">
                <h4 data-en="YOUR CART" data-ar="Ø³Ù„Ø© Ù…Ø´ØªØ±ÙŠØ§ØªÙƒ">YOUR CART</h4>
                <ul id="cart-items"></ul>
                <div style="margin-top:20px; border-top: 2px solid #e63946; padding-top:10px;">
                    <p><span data-en="Total:" data-ar="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:">Total:</span> $<span id="cart-total">0.00</span></p>
                </div>
                <button class="mini-pixel-btn" onclick="checkout()" data-en="PURCHASE" data-ar="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡" style="width:100%; padding:15px; margin-top:15px;">PURCHASE</button>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const audio = document.getElementById('storeMusic');
            const musicBtn = document.getElementById('music-btn-store');
            const musicStatus = document.getElementById('music-status-store');
            const slashSound = document.getElementById('slash-sound');

            // --- 1. ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙØ§ØªÙŠØ­Ùƒ Ø§Ù„Ø®Ø§ØµØ©) ---
            function syncSettings() {
                const lang = localStorage.getItem('samurai_lang') || 'en';
                const theme = localStorage.getItem('samurai_theme') || 'dark';
                const musicSetting = localStorage.getItem('samurai_music_on');

                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ©
                const isAr = (lang === 'ar');
                document.body.classList.toggle('rtl', isAr);
                document.querySelectorAll('[data-en]').forEach(el => {
                    el.innerText = isAr ? el.getAttribute('data-ar') : el.getAttribute('data-en');
                });

                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ… (Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ)
                const isLight = (theme === 'light');
                document.body.classList.toggle('light-mode', isLight);

                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
                if (musicSetting === 'true') {
                    audio.play().catch(() => {
                        // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ø£ÙˆÙ„ ØªÙØ§Ø¹Ù„ Ø¥Ø°Ø§ Ù…Ù†Ø¹ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„ØªØ´ØºÙŠÙ„
                        window.addEventListener('click', () => {
                            if(localStorage.getItem('samurai_music_on') === 'true') audio.play();
                        }, {once: true});
                    });
                    musicStatus.innerText = "ON";
                } else {
                    audio.pause();
                    musicStatus.innerText = "OFF";
                }
            }

            // ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
            syncSettings();

            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Tab Ø¢Ø®Ø± (Ø¥Ø°Ø§ ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„ØªØ¨ÙˆÙŠØ¨ÙŠÙ† Ù…ÙØªÙˆØ­ÙŠÙ†)
            window.addEventListener('storage', syncSettings);

            // Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØ¬Ø± (ÙŠØ­Ø¯Ø« Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø£ÙŠØ¶Ø§Ù‹)
            if (musicBtn) {
                musicBtn.onclick = () => {
                    if (audio.paused) {
                        audio.play();
                        musicStatus.innerText = "ON";
                        localStorage.setItem('samurai_music_on', 'true');
                    } else {
                        audio.pause();
                        musicStatus.innerText = "OFF";
                        localStorage.setItem('samurai_music_on', 'false');
                    }
                };
            }

            // ØªØ£Ø«ÙŠØ± Ø¶Ø±Ø¨Ø© Ø§Ù„Ø³ÙŠÙ (Ù…Ù† ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠ)
            document.addEventListener('mousedown', (e) => {
                if (slashSound) {
                    slashSound.currentTime = 0;
                    slashSound.play().catch(() => {});
                }
                const slash = document.createElement('div');
                slash.className = 'slash-effect'; // ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ style.css
                slash.style.left = e.clientX + 'px';
                slash.style.top = e.clientY + 'px';
                document.body.appendChild(slash);
                setTimeout(() => slash.remove(), 250);
            });

            // --- ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨ØªÙ„Ø§Øª ---
            setInterval(() => {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.animationDuration = (Math.random() * 3 + 5) + 's';
                document.getElementById('petals-container').appendChild(petal);
                setTimeout(() => petal.remove(), 8000);
            }, 400);
        });

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ù„Ø© ---
        let cart = [];
        function addToCart(name, price) {
    cart.push({ name, price });
    updateCart();
    
    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø³Ù†Ø§Ùƒ Ø¨Ø§Ø± Ù‡Ù†Ø§
    const isAr = localStorage.getItem('samurai_lang') === 'ar';
    showSamuraiToast(isAr ? "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©" : "Added to Cart", "success");
}
        function updateCart() {
            const list = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total');
            list.innerHTML = '';
            let total = 0;
            cart.forEach((item) => {
                total += item.price;
                list.innerHTML += `<li>${item.name} <span>$${item.price}</span></li>`;
            });
            totalEl.innerText = total.toFixed(2);
        }

        function checkout() {
    const isAr = localStorage.getItem('samurai_lang') === 'ar';
    
    if(cart.length === 0) {
        showSamuraiToast(isAr ? "Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!" : "Cart is empty!", "info");
        return;
    }
    
    // Ù†Ø¬Ø§Ø­ Ø§Ù„Ø´Ø±Ø§Ø¡
    showSamuraiToast(isAr ? "ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!" : "Purchase Successful!", "success");
    cart = [];
    updateCart();
}
        document.addEventListener('DOMContentLoaded', () => {
    const doors = document.querySelector('.samurai-doors');

    // 1. Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„: Ø§ÙØªØ­ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·
    setTimeout(() => {
        if (doors) doors.classList.add('open');
    }, 100);

    // 2. Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·: Ø£ØºÙ„Ù‚ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ Ø«Ù… Ø§Ù†ØªÙ‚Ù„
    const navLinks = document.querySelectorAll('a');
    
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            // Ù†ØªØ­Ù‚Ù‚ Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø¯Ø§Ø®Ù„ÙŠ (ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…ÙˆÙ‚Ø¹)
            if (link.hostname === window.location.hostname && !link.hash && link.target !== "_blank") {
                e.preventDefault();
                const targetUrl = link.href;

                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨
                doors.classList.remove('open');
                doors.classList.add('close');

                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† (0.6 Ø«Ø§Ù†ÙŠØ©)
                setTimeout(() => {
                    window.location.href = targetUrl;
                }, 600);
            }
        });
    });
});
function showSamuraiToast(message, type = 'default') {
    const container = document.getElementById('snackbar-container');
    if (!container) return;

    // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
    const toast = document.createElement('div');
    toast.className = `snackbar ${type}`;
    
    // Ø¥Ø¶Ø§ÙØ© Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¨Ø³ÙŠØ·Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
    let icon = 'âš”ï¸';
    if (type === 'success') icon = 'âœ…';
    if (type === 'info') icon = 'ğŸ®';

    toast.innerHTML = `<span>${icon}</span> <span>${message}</span>`;

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø­Ø§ÙˆÙŠØ©
    container.appendChild(toast);

    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†Ù
    setTimeout(() => {
        toast.classList.add('fade-out');
        setTimeout(() => toast.remove(), 400);
    }, 3000);
}
    </script>
    <div id="snackbar-container"></div>
</body>
</html>